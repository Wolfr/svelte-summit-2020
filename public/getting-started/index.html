<!DOCTYPE html>
      <html lang="en">
        <head>
          <meta charset="UTF-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <link rel="preload" href="/dist/static/fonts/Anton-Regular.woff" as="font" type="font/woff2" crossorigin data-svelte="svelte-5kl3zj"><link rel="preload" href="/dist/static/fonts/Overpass-Regular.woff2" as="font" type="font/woff2" crossorigin data-svelte="svelte-5kl3zj"><link rel="preload" href="/dist/static/fonts/Overpass-Bold.woff2" as="font" type="font/woff2" crossorigin data-svelte="svelte-5kl3zj"><link rel="preload" href="/dist/static/fonts/Inter-Regular.woff" as="font" type="font/woff2" crossorigin data-svelte="svelte-5kl3zj"><link rel="stylesheet" href="/dist/static/style.css" data-svelte="svelte-5kl3zj"><title>Getting Started with Elder.js</title><link rel="preload" href="/dist/static/s.min.js" as="script"><style data-name="cssStack">h1.svelte-5xzbsg{margin-bottom:10px}.title.svelte-5xzbsg{margin-top:1rem;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid #ddd}h2{margin-top:2rem}pre{background:#eee;padding:1rem;border-radius:1rem}blockquote{margin:0;background:#ddd;padding:3px 1.5rem 3px 3rem;position:relative;border-radius:1rem}blockquote:after{content:">";color:#aaa;font-size:30px;position:absolute;top:33%;left:1rem}blockquote p{padding:0}</style>
        </head>
        <body class="talks">
          
<div class="container">
<a href="/">‚Üê Home</a>

<div class="title svelte-5xzbsg"><h1 class="svelte-5xzbsg">Getting Started with Elder.js</h1>
  <small>By Nick Reese</small></div>

<p>Sweet! So you've got the Elder.js starter template up and running. What's next?</p>
<p>Let's take a look:</p>
<h2>3 Routes To Explore</h2>
<p>This project is structured to follow the required Elder.js folder structure which you can see below, but in short you've got 3 routes in the <code>./src/routes/</code> folder. They are "hooks", "home", and "blog."</p>
<p>Each of these 3 routes are designed to showcase something different.</p>
<ul>
<li>Home - This is the simple route to illustrate the basic concepts. Open up the <code>./src/routes/home/route.js</code> file and look at how the <code>all</code> and <code>permalink</code> functions work. Then look at the <code>Home.svelte</code> to see what is going on there.</li>
<li>Blog - This route is powered almost exclusively by a plugin which you can find in <code>./src/plugins/elderjs-plugin/markdown/</code>. You can find this page's markdown at <code>./src/routes/blog/getting-started.md</code>. Try duplicating one of the existing markdown files and renaming it. You'll see that the homepage will change next time you build or reload the server.</li>
<li>Hooks - The hooks route illustrates how to add data to a page and the data flow. In the <code>./src/routes/hooks/route.js</code> file you'll see we're importing the hookInterface and then building a page for each hook using the <code>all</code> and <code>permalink</code> functions. Next open up the <code>./src/routes/hooks/data.js</code> and the <code>./src/routes/hooks/Hooks.svelte</code> to see how data is passed from request --> data --> Svelte.</li>
</ul>
<h2>Writing Your First Hook:</h2>
<p>Once you've explored the templates above, it is worth looking a bit at how the hooks work.</p>
<p>Open up the <code>./src/hooks.ts</code> file and look at the hooks this project uses.</p>
<p>You'll see there is just one hook that is commented out.</p>
<p>If you uncomment that hook, and reload this page, you'll see that the html is now compressed... but the code blocks are broken. (they always say don't compress html with regex!).</p>
<p>In plain english, this hook takes the <code>htmlString</code>, modifies it (compresses it), and returns it.</p>
<p>Now that you see the power of hooks, let's have you add your first hook which illustrates how you'd add analytics code to every page of your site.</p>
<p>Copy and paste the hook below into your <code>hooks.ts</code> file.</p>
<pre><code class="language-javascript">  {
    hook: 'stacks',
    name: 'addAnalyticstoFooter',
    description: 'Add analytics to Footer.',
    priority: 100, // we want it to be last
    run: async ({ footerStack }) => {
      footerStack.push({
        source: 'hooks',
        string: `&#x3C;!-- your analytics code here -->`,
        priority: 100,
      });
      return { footerStack }
    },
  },
</code></pre>
<p>If you reload your html, you should see the html comment from the hook.</p>
<p>In this hook we are manipulating a "stack."</p>
<p>Under the hood, Elder.js uses stacks to predictably manage in what order strings are rendered.</p>
<p>In this hook we're just adding our analytics code at a priority of 100 (last).</p>
<p>If stacks seem foreign, just remember they are a list of strings with some meta data.</p>
<h2>Hooks In Depth:</h2>
<p>Elder.js runs it's hooks system based on it's 'hookInterface'. This interface defines which hooks can do what and what properties they have.</p>
<p>In building Elder.js we found that if anything can be mutated at anytime, a system quickly gets hard to reason about.</p>
<p>The 'hookInterface' is designed to solve that problem. While you can explore all of the hooks on the homepage, before you go try adding a malicious hook that is designed to corrupt important data during page load.</p>
<p>Add the hook below to your <code>hooks.ts</code> file and reload this page:</p>
<pre><code class="language-javascript">{
 hook: 'data',
 name: 'maliciousHook',
 description: 'Can we break anything?',
 priority: 2, // this runs just after Elder.js's functions run.
 run: async ({ helpers, data, settings, request, query }) => {
   settings = null;
   request = null;
   helpers = null;
   query = null;

   return { settings, request, query, helpers }
 },
},
</code></pre>
<p>On reload, if you check the console you'll see that this hook wasn't able to mutate any of the props due to the way the hookInterface is configured.</p>
<p>Essentially only properties that are able to be mutated on a hook, will be mutated on the hook. This helps keep plugins and developers honest and makes maintaining the project in the future easier to reason about. :)</p>
<p>If you're interested in exploring hooks more check out the full <a href="https://elderguide.com/tech/elderjs/">Elder.js documentation on ElderGuide</a>.</p>
<h2>Elder.js Project Structure</h2>
<p>Under the hood Elder.js does quite a bit of magic based on the file structure below but more importantly the <code>rollup.config.js</code> is setup to match this file structure. Since rollup handles all of the bundling of our Svelte components, we recommend you follow this structure unless you like tinkering with bundlers.</p>
<pre><code>Project Root
| elder.config.js
| package.json
| tsconfig.json (typescript only)
| rollup.config.js
| ... (other common stuff, .gitignore, svelte.config.js... etc)
| -- src
| -- | -- build.js
| -- | -- server.js
| -- helpers
| -- | -- index.js
| -- | -- ...
| -- assets
| -- | -- items to be copied to public at build.
| -- layouts
| -- | -- Layout.svelte
| -- routes
| -- | -- [route] ('blog' in this example)
| -- | -- | -- Blog.svelte
| -- | -- | -- route.js
| -- plugins
| -- | -- [plugin] ('elderjs-plugin-markdown' for example)
| -- | -- | -- index.js
| -- components
| -- | -- [component] ('Contact' in this example)
| -- | -- | -- Contact.svelte


Typescript Projects:
| -- build
| -- | ... copy of your compiled ts from the src folder here.
</code></pre>
</div>
          
          
          
          
        </body>
      </html>
    